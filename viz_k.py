import matplotlib.pyplot as plt

# data -- rtold = 10^-5
accelerated_1 = sorted([(8, 11, 0.0010356903076171875), (12, 1472, 0.05395817756652832), (14, 336, 0.01208949089050293), (16, 436, 0.015285491943359375), (22, 810, 0.028632640838623047), (26, 1496, 0.05241799354553223), (30, 2609, 0.09481191635131836), (32, 1083, 0.03896188735961914), (34, 1768, 0.06329154968261719), (30, 662, 0.0258333683013916), (52, 1859, 0.06802821159362793), (48, 2670, 0.09706950187683105), (64, 3033, 0.11234259605407715), (60, 2739, 0.1012425422668457), (66, 5553, 0.21014928817749023), (64, -1), (70, 4186, 0.1574554443359375), (88, -1), (76, 3459, 0.1292128562927246), (92, 10536, 0.39914798736572266), (106, 2776, 0.2825775146484375), (106, 2156, 0.22334718704223633), (110, 6348, 0.6465599536895752), (122, 9898, 1.0750329494476318), (146, 2838, 0.34830141067504883), (144, -1), (156, -1), (158, 4065, 0.5097918510437012), (170, 3066, 0.37788844108581543), (174, -1), (188, -1), (196, 15974, 1.9649312496185303), (210, 6883, 0.8615615367889404), (180, -1), (192, -1), (228, -1), (230, 11125, 1.4462435245513916), (242, 14099, 1.8714368343353271), (280, 10860, 1.6422336101531982), (282, 9508, 1.3642890453338623), (260, 17704, 2.3867013454437256), (304, -1), (296, 8267, 1.1036920547485352), (338, -1), (322, 5961, 0.8036503791809082)], key=lambda x:x[0])
accelerated_2 = sorted([(8, 4, 0.0007030963897705078), (12, 270, 0.015462875366210938), (14, 75, 0.003154277801513672), (16, 71, 0.003656148910522461), (22, 159, 0.006745576858520508), (26, 252, 0.010782480239868164), (30, 391, 0.016169309616088867), (32, 170, 0.006616115570068359), (34, 132, 0.005115509033203125), (30, 116, 0.004621267318725586), (52, 210, 0.00816655158996582), (48, 513, 0.019617080688476562), (64, 469, 0.017658233642578125), (60, 291, 0.011072874069213867), (66, 678, 0.026754140853881836), (64, 899, 0.042809486389160156), (70, 554, 0.022370576858520508), (88, 1846, 0.0739598274230957), (76, 404, 0.016344070434570312), (92, 780, 0.0322873592376709), (106, 991, 0.09544205665588379), (106, 495, 0.054201602935791016), (110, 957, 0.09056472778320312), (122, 996, 0.11461830139160156), (146, 417, 0.04262709617614746), (144, -1), (156, 2623, 0.3007197380065918), (158, 1193, 0.15186548233032227), (170, 875, 0.10045599937438965), (174, 1661, 0.1970374584197998), (188, 2506, 0.30736589431762695), (196, 3152, 0.3815317153930664), (210, 1249, 0.15021681785583496), (180, -1), (192, 2442, 0.3349294662475586), (228, 1688, 0.638056755065918), (230, 1775, 0.5966053009033203), (242, 2161, 0.3576998710632324), (280, 1555, 0.20718836784362793), (282, 2078, 0.36439943313598633), (260, 1658, 0.20768380165100098), (304, 3164, 0.4295327663421631), (296, 2483, 0.3043084144592285), (338, 4261, 0.9622225761413574), (322, 1940, 0.4553039073944092)] ,key = lambda x:x[0])

# parse data
edges_acc_1 = [x[0] for x in accelerated_1 if x[1] != -1]
iterations_acc_1 = [x[1] for x in accelerated_1 if x[1] != -1]
non_conv_acc_1 = [x[0] for x in accelerated_1 if x[1] == -1]

edges_acc_2 = [x[0] for x in accelerated_2 if x[1] != -1]
iterations_acc_2 = [x[1] for x in accelerated_2 if x[1] != -1]
non_conv_acc_2 = [x[0] for x in accelerated_2 if x[1] == -1]

# plot the lines
plt.plot(edges_acc_1, iterations_acc_1, linestyle='-', color='C3', label=r'PGD')
plt.plot(edges_acc_2, iterations_acc_2, linestyle='-', color='C0', label=r'NGD $\beta$ = 2')

# show the final plot
ax = plt.subplot(111)
ax.set_xlabel('Number of edges')
ax.set_ylabel('Number of iterations')
ax.set_title('Iterations required for convergence \n same fixed step size used for PGD and NGD')
ax.legend()
ax.grid('on')
plt.show()
